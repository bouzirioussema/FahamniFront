{
  "version": 3,
  "sources": ["src/app/backoffice/dashboard/dashboard.component.ts", "src/app/backoffice/dashboard/dashboard.component.html"],
  "sourcesContent": ["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router, RouterModule } from '@angular/router';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\ninterface User {\n  id: number;\n  username: string;\n  email: string;\n  role: string;\n  emailVerified: boolean;\n  enabled: boolean;\n  createdAt?: string;\n}\n\ninterface UserStats {\n  totalUsers: number;\n  adminCount: number;\n  teacherCount: number;\n  studentCount: number;\n  verifiedCount: number;\n}\n\n@Component({\n  selector: 'app-dashboard',\n  standalone: true,\n  imports: [CommonModule, FormsModule, RouterModule],\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})\nexport class DashboardComponent implements OnInit {\n  users: User[] = [];\n  filteredUsers: User[] = [];\n  stats: UserStats = {\n    totalUsers: 0,\n    adminCount: 0,\n    teacherCount: 0,\n    studentCount: 0,\n    verifiedCount: 0\n  };\n  \n  // UI State\n  loading = false;\n  error = '';\n  success = '';\n  searchTerm = '';\n  selectedRole = '';\n  showUserForm = false;\n  editingUser: User | null = null;\n  \n  // Form Data\n  userForm = {\n    username: '',\n    email: '',\n    password: '',\n    role: 'STUDENT'\n  };\n  \n  // Current admin user info\n  currentUser = {\n    username: '',\n    email: '',\n    role: ''\n  };\n\n  private apiUrl = 'http://localhost:8082/api';\n\n  constructor(private router: Router, private http: HttpClient) {}\n\n  ngOnInit(): void {\n    this.loadCurrentUserInfo();\n    this.loadUsers();\n    this.loadStats();\n  }\n\n  loadCurrentUserInfo(): void {\n    this.currentUser.username = localStorage.getItem('username') || 'Admin';\n    this.currentUser.email = localStorage.getItem('email') || '';\n    this.currentUser.role = localStorage.getItem('role') || 'ROLE_ADMIN';\n  }\n\n  getAuthHeaders(): HttpHeaders {\n    const token = localStorage.getItem('jwtToken');\n    return new HttpHeaders({\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    });\n  }\n\n  loadUsers(): void {\n    this.loading = true;\n    this.error = '';\n    \n    this.http.get<User[]>(`${this.apiUrl}/admin/users`, { headers: this.getAuthHeaders() })\n      .subscribe({\n        next: (users: User[]) => {\n          this.users = users;\n          this.filteredUsers = users;\n          this.loading = false;\n          this.filterUsers();\n        },\n        error: (error: any) => {\n          this.error = 'Failed to load users: ' + (error.message || 'Unknown error');\n          this.loading = false;\n        }\n      });\n  }\n\n  loadStats(): void {\n    this.http.get<UserStats>(`${this.apiUrl}/admin/stats`, { headers: this.getAuthHeaders() })\n      .subscribe({\n        next: (stats: UserStats) => {\n          this.stats = stats;\n        },\n        error: (error: any) => {\n          console.error('Failed to load stats:', error);\n        }\n      });\n  }\n\n  filterUsers(): void {\n    this.filteredUsers = this.users.filter(user => {\n      const matchesSearch = !this.searchTerm || \n        user.username.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n        user.email.toLowerCase().includes(this.searchTerm.toLowerCase());\n      \n      const matchesRole = !this.selectedRole || user.role === this.selectedRole;\n      \n      return matchesSearch && matchesRole;\n    });\n  }\n\n  openUserForm(user?: User): void {\n    this.editingUser = user || null;\n    if (user) {\n      this.userForm = {\n        username: user.username,\n        email: user.email,\n        password: '',\n        role: user.role\n      };\n    } else {\n      this.userForm = {\n        username: '',\n        email: '',\n        password: '',\n        role: 'STUDENT'\n      };\n    }\n    this.showUserForm = true;\n    this.error = '';\n    this.success = '';\n  }\n\n  closeUserForm(): void {\n    this.showUserForm = false;\n    this.editingUser = null;\n    this.userForm = {\n      username: '',\n      email: '',\n      password: '',\n      role: 'STUDENT'\n    };\n  }\n\n  saveUser(): void {\n    if (!this.userForm.username || !this.userForm.email || (!this.editingUser && !this.userForm.password)) {\n      this.error = 'Please fill in all required fields';\n      return;\n    }\n\n    this.loading = true;\n    this.error = '';\n\n    const userData = {\n      username: this.userForm.username,\n      email: this.userForm.email,\n      role: this.userForm.role,\n      ...(this.userForm.password && { password: this.userForm.password })\n    };\n\n    const operation = this.editingUser\n      ? this.http.put(`${this.apiUrl}/admin/users/${this.editingUser.id}`, userData, { headers: this.getAuthHeaders() })\n      : this.http.post(`${this.apiUrl}/admin/users`, userData, { headers: this.getAuthHeaders() });\n\n    operation.subscribe({\n      next: () => {\n        this.success = this.editingUser ? 'User updated successfully' : 'User created successfully';\n        this.loading = false;\n        this.loadUsers();\n        this.loadStats();\n        setTimeout(() => this.closeUserForm(), 1500);\n      },\n      error: (error: any) => {\n        this.error = 'Failed to save user: ' + (error.message || 'Unknown error');\n        this.loading = false;\n      }\n    });\n  }\n\n  deleteUser(user: User): void {\n    if (confirm(`Are you sure you want to delete user \"${user.username}\"?`)) {\n      this.loading = true;\n      \n      this.http.delete(`${this.apiUrl}/admin/users/${user.id}`, { headers: this.getAuthHeaders() })\n        .subscribe({\n          next: () => {\n            this.success = 'User deleted successfully';\n            this.loadUsers();\n            this.loadStats();\n            setTimeout(() => this.success = '', 3000);\n          },\n          error: (error: any) => {\n            this.error = 'Failed to delete user: ' + (error.message || 'Unknown error');\n            this.loading = false;\n          }\n        });\n    }\n  }\n\n  toggleUserStatus(user: User): void {\n    this.http.patch(`${this.apiUrl}/admin/users/${user.id}/toggle-status`, {}, { headers: this.getAuthHeaders() })\n      .subscribe({\n        next: () => {\n          this.success = 'User status updated successfully';\n          this.loadUsers();\n          setTimeout(() => this.success = '', 3000);\n        },\n        error: (error: any) => {\n          this.error = 'Failed to update user status: ' + (error.message || 'Unknown error');\n        }\n      });\n  }\n\n  getRoleColor(role: string): string {\n    switch (role) {\n      case 'ADMIN': return '#dc2626';\n      case 'TEACHER': return '#2563eb';\n      case 'STUDENT': return '#059669';\n      default: return '#6b7280';\n    }\n  }\n\n  getRoleBadgeClass(role: string): string {\n    switch (role) {\n      case 'ADMIN': return 'badge-admin';\n      case 'TEACHER': return 'badge-teacher';\n      case 'STUDENT': return 'badge-student';\n      default: return 'badge-default';\n    }\n  }\n\n  getInitials(username: string): string {\n    if (!username) return '';\n    return username.charAt(0).toUpperCase();\n  }\n\n  getUserAvatarColor(username: string): string {\n    const colors = [\n      '#3b82f6', // blue\n      '#ef4444', // red\n      '#10b981', // green\n      '#f59e0b', // yellow\n      '#8b5cf6', // purple\n      '#06b6d4', // cyan\n      '#f97316', // orange\n      '#84cc16', // lime\n      '#ec4899', // pink\n      '#6366f1'  // indigo\n    ];\n    \n    // Generate a consistent color based on username\n    let hash = 0;\n    for (let i = 0; i < username.length; i++) {\n      hash = username.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    const index = Math.abs(hash) % colors.length;\n    return colors[index];\n  }\n\n  isActiveRoute(route: string): boolean {\n    return this.router.url === route;\n  }\n\n  logout(): void {\n    localStorage.clear();\n    this.router.navigate(['/login']);\n  }\n}\n", "<!-- Dashboard Content -->\n    <!-- Stats Cards -->\n    <section class=\"stats-section\">\n      <div class=\"stats-grid\">\n        <div class=\"stat-card total\">\n          <div class=\"stat-icon\">\n            <i class=\"material-icons\">people</i>\n          </div>\n          <div class=\"stat-content\">\n            <h3>{{ stats.totalUsers }}</h3>\n            <p>Total Users</p>\n          </div>\n        </div>\n        \n        <div class=\"stat-card admin\">\n          <div class=\"stat-icon\">\n            <i class=\"material-icons\">admin_panel_settings</i>\n          </div>\n          <div class=\"stat-content\">\n            <h3>{{ stats.adminCount }}</h3>\n            <p>Administrators</p>\n          </div>\n        </div>\n        \n        <div class=\"stat-card teacher\">\n          <div class=\"stat-icon\">\n            <i class=\"material-icons\">school</i>\n          </div>\n          <div class=\"stat-content\">\n            <h3>{{ stats.teacherCount }}</h3>\n            <p>Teachers</p>\n          </div>\n        </div>\n        \n        <div class=\"stat-card student\">\n          <div class=\"stat-icon\">\n            <i class=\"material-icons\">menu_book</i>\n          </div>\n          <div class=\"stat-content\">\n            <h3>{{ stats.studentCount }}</h3>\n            <p>Students</p>\n          </div>\n        </div>\n      </div>\n    </section>\n"],
  "mappings": "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",
  "names": []
}
